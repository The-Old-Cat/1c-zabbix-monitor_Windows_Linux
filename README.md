# 1C:Enterprise Monitoring Tool for Zabbix

–ö—Ä–æ—Å—Å–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ (Windows/Linux) –¥–ª—è –±–µ—Ä–µ–∂–Ω–æ–≥–æ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∫–ª–∞—Å—Ç–µ—Ä–∞ 1–°:–ü—Ä–µ–¥–ø—Ä–∏—è—Ç–∏–µ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º **Python**, **Zabbix** –∏ –º–µ–Ω–µ–¥–∂–µ—Ä–∞ –ø–∞–∫–µ—Ç–æ–≤ **uv**.

## üöÄ –û—Å–Ω–æ–≤–Ω–∞—è –∫–æ–Ω—Ü–µ–ø—Ü–∏—è

–ú–∏–Ω–∏–º–∏–∑–∞—Ü–∏—è –Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ –∫–ª–∞—Å—Ç–µ—Ä 1–°. –í –æ—Ç–ª–∏—á–∏–µ –æ—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö –º–µ—Ç–æ–¥–æ–≤, –¥–∞–Ω–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç:

1. **–ö—ç—à–∏—Ä—É–µ—Ç –æ—Ç–≤–µ—Ç—ã RAC**: –∑–∞–ø—Ä–æ—Å—ã –∫ –∫–ª–∞—Å—Ç–µ—Ä—É –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –Ω–µ —á–∞—â–µ –æ–¥–Ω–æ–≥–æ —Ä–∞–∑–∞ –≤ –º–∏–Ω—É—Ç—É.
2. **–ü–∞—Ä—Å–∏—Ç –ª–æ–≥–∏ ¬´—Å —Ö–≤–æ—Å—Ç–∞¬ª**: —á—Ç–µ–Ω–∏–µ —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –∑–∞–ø–∏—Å–µ–π –∂—É—Ä–Ω–∞–ª–æ–≤ –±–µ–∑ –Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ –¥–∏—Å–∫.
3. **–ï–¥–∏–Ω—ã–π –∫–æ–¥**: —Ä–∞–±–æ—Ç–∞–µ—Ç –æ–¥–∏–Ω–∞–∫–æ–≤–æ –Ω–∞ Windows –∏ Linux.

---

## üõ† –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

* **Language:** Python 3.10+
* **Package Manager:** [uv](https://github.com/astral-sh/uv) (fastest Python bundler)
* **Monitoring:** Zabbix 6.0+ (Agent/Agent2)
* **1C Tools:** RAC (Remote Administration Client)

---

## üìã –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

* **RAC Monitoring:** —Å—Ç–∞—Ç—É—Å –∫–ª–∞—Å—Ç–µ—Ä–∞, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–µ–∞–Ω—Å–æ–≤, —Ä–∞–±–æ—á–∏–µ –ø—Ä–æ—Ü–µ—Å—Å—ã (rphost).
* **Log Analysis:** –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫ (ERROR, FATAL, EXCP) –≤ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–æ–º –∂—É—Ä–Ω–∞–ª–µ 1–° –∏ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –ª–æ–≥–∞—Ö (EventLog/journald).
* **Health Check:** –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Å–ª—É–∂–±—ã RAS.
* **Smart Cache:** –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ "—à—Ç–æ—Ä–º–∞ –∑–∞–ø—Ä–æ—Å–æ–≤" –∫ –º–µ–Ω–µ–¥–∂–µ—Ä—É –∫–ª–∞—Å—Ç–µ—Ä–∞.

---

## üì¶ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç (Deployment)

### 1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ `uv`, –µ—Å–ª–∏ –æ–Ω –µ—â–µ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω:

```bash
# Windows (PowerShell)
powershell -c "irm https://astral.sh/uv/install.ps1 | iex"

# Linux/macOS
curl -LsSf https://astral.sh/uv/install.sh | sh

```

### 2. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞

–°–∫–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–π—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:

```bash
git clone https://github.com/your-repo/1c-zabbix-monitor.git
cd 1c-zabbix-monitor
uv sync

```

### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `config.yaml`. –£–∫–∞–∂–∏—Ç–µ –ø—É—Ç–∏ –∫ `rac` –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è:

```yaml
rac_path: "C:\\Program Files\\1cv8\\8.3.xx\\bin\\rac.exe" # –î–ª—è Windows
cache_ttl: 60
log_path: "C:\\1C\\Logs"

```

---

## üîß –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Zabbix

### 1. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ UserParameter

–î–æ–±–∞–≤—å—Ç–µ —Ñ–∞–π–ª –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –≤ –≤–∞—à Zabbix Agent:

**Windows:** `C:\Program Files\Zabbix Agent\zabbix_agentd.conf.d\1c_monitor.conf`
**Linux:** `/etc/zabbix/zabbix_agentd.d/1c_monitor.conf`

```ini
UserParameter=1c.sessions[*], uv run python collector.py --metric sessions
UserParameter=1c.rphost[*], uv run python collector.py --metric rphost
UserParameter=1c.log.errors, uv run python collector.py --metric logs

```

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞

```bash
uv run python collector.py --metric sessions

```

---

## üìà –°—Ö–µ–º–∞ —Ä–∞–±–æ—Ç—ã

---

## ü§ù –ö–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

* –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –Ω–µ –ø–µ—Ä–µ–¥–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π 1–°.
* –í—Å–µ –∑–∞–ø—Ä–æ—Å—ã –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ.
* –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π –∏–Ω—Ç–µ—Ä–≤–∞–ª –æ–ø—Ä–æ—Å–∞ –≤ Zabbix: **1-5 –º–∏–Ω—É—Ç**.

---
